---
# Source: quay-enterprise/templates/01_quay_project.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: quay-enterprise

---
# Source: quay-enterprise/templates/02_redhat-pull-secret.yaml
apiVersion: v1
data:
  .dockerconfigjson: ewogICJhdXRocyI6IHsKICAgICJxdWF5LmlvIjogewogICAgICAiYXV0aCI6ICJjbVZrYUdGMEszRjFZWGs2VHpneFYxTklVbE5LVWpFMFZVRmFRa3MxTkVkUlNFcFRNRkF4VmpSRFRGZEJTbFl4V0RKRE5GTkVOMHRQTlRsRFVUbE9NMUpGTVRJMk1USllWVEZJVWc9PSIsCiAgICAgICJlbWFpbCI6ICIiCiAgICB9CiAgfQp9
kind: Secret
metadata:
  annotations:
  name: redhat-pull-secret
  namespace: quay-enterprise
type: kubernetes.io/dockerconfigjson

---
# Source: quay-enterprise/templates/06_db-creds.yaml
apiVersion: v1
stringData:
  database-username: "{{ .Values.CR.secrets.db.user }}"
  database-password: "{{ .Values.CR.secrets.db.pass }}"
  database-root-password: "{{ .Values.CR.secrets.db.rootpass }}"
  database-name:  "{{ .Values.CR.secrets.db.name }}"
kind: Secret
metadata:
  annotations:
  name: db-creds
  namespace: quay-enterprise
type: Opaque

---
# Source: quay-enterprise/templates/07_quay-config-creds.yaml
apiVersion: v1
stringData:
  config-app-password: "{{ .Values.CR.secrets.quay.config.pass  }}"
kind: Secret
metadata:
  annotations:
  name: quay-config-creds
  namespace: quay-enterprise
type: Opaque

---
# Source: quay-enterprise/templates/08_quayconfigfile.yaml
apiVersion: v1
data:
  configmore.yaml: >-
    QVBQX1NQRUNJRklDX1RPS0VOX0VYUElSQVRJT046IDNtCkZFQVRVUkVfQU5PTllNT1VTX0FDQ0VTUzogZmFsc2UKRkVBVFVSRV9JTlZJVEVfT05MWV9VU0VSX0NSRUFUSU9OOiBmYWxzZQpGRUFUVVJFX1BBUlRJQUxfVVNFUl9BVVRPQ09NUExFVEU6IGZhbHNlCkZFQVRVUkVfUkVRVUlSRV9FTkNSWVBURURfQkFTSUNfQVVUSDogdHJ1ZQo=
kind: Secret
metadata:
  annotations:
  name: quayconfigfile
  namespace: quay-enterprise
type: Opaque

---
# Source: quay-enterprise/templates/09_redis-creds.yaml
apiVersion: v1
stringData:
  password: "{{ .Values.CR.secrets.redis.pass  }}"
kind: Secret
metadata:
  annotations:
  name: redis-creds
  namespace: quay-enterprise
type: Opaque

---
# Source: quay-enterprise/templates/10_super-user-quay.yaml
apiVersion: v1
stringData:
  superuser-username: "{{ .Values.CR.secrets.quay.super.user }}"
  superuser-password: "{{ .Values.CR.secrets.quay.super.pass }}"
  superuser-email: "{{ .Values.CR.secrets.quay.super.mail }}"
kind: Secret
metadata:
  annotations:
  name: super-user-quay
  namespace: quay-enterprise
type: Opaque

---
# Source: quay-enterprise/templates/11_custom-quay-tls.yaml
kind: Secret
apiVersion: v1
metadata:
  name: custom-quay-ssl
  namespace: quay-enterprise
data:
  tls.crt: >-
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURTVENDQWpFQ0NRQzhlV3NTblBlRTdEQU5CZ2txaGtpRzl3MEJBUXNGQURCVE1Rc3dDUVlEVlFRR0V3SlkKV0RFVk1CTUdBMVVFQnd3TVJHVm1ZWFZzZENCRGFYUjVNUXd3Q2dZRFZRUUtEQU5OVDBReEVUQVBCZ05WQkFzTQpDRU5zYjNWa2JHVjBNUXd3Q2dZRFZRUUREQU5TYmtRd0hoY05NakF3TlRFNU1USXpPREUzV2hjTk16QXdOVEUzCk1USXpPREUzV2pCNk1Rc3dDUVlEVlFRR0V3SllXREVWTUJNR0ExVUVCd3dNUkdWbVlYVnNkQ0JEYVhSNU1Sd3cKR2dZRFZRUUtEQk5FWldaaGRXeDBJRU52YlhCaGJua2dUSFJrTVRZd05BWURWUVFEREMwcUxtRndjSE11YjJOdwpORE10YjJabWJHbHVaUzV6WVd4bGN5NXNZV0l1ZEd4MkxuSmxaR2hoZEM1amIyMHdnZ0VpTUEwR0NTcUdTSWIzCkRRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRRExuSDZwQy9ubWIyRzRJNzJDeG01UzI4QkRtcnB5aDR1RnJMMUEKZENHeTlUdE1udms4SUtBU0JBS3BTdEorVkNULzVKOXJxcnFRYXFSTm1EMXRKYjlzcmxuOGNtR0tCeTFIZU1ybQpUTGdRMHJQNHFGc0hMekxHNGEya0oxdTU3NEk1K1l2M25UMEhmZHJFUGs1ZWZnQnJiS2YrekRJWHc1d3QzQ0V5CjVFa0wrL3N6Nm1NbHJlTFl6RTE1R2ZIR0dyZk9iMm0zSTIyUEx6VFFkakhhWG1sWGFYR3R5NlZuRW5RU1lSdngKb1czaThwL25XOThjdVBua3FSaW5uQ2tCdCsxM1M1YmpVbXROZTlpQWphdlFibHNDNEdEdEQ4Zy9aZWp5Z2xZUgorcXkvTHlnOFFzSWZHcWpwRzkrRFp6SGlkZmtkRmg3MkovRzRKL0ZITmYwc1N5ei9BZ01CQUFFd0RRWUpLb1pJCmh2Y05BUUVMQlFBRGdnRUJBR3ZPWlBJR0YyQjNudFJNV3JLRzYvKytEbkdTRFFaTFJUdFJLUnhEUmkwNms0dGUKNEZsbzB3Tmk2M09YVU14c0plWEdPOTBkbnY2YzUrOGN0Vm9mckZjQXhWeHQ5YUF6SkJRWldrbEdINVNNRUtVRApyZjBjN0t6eHZoWUZXV0VNaS9XS1FTZTlZTGF0Tk1OU3pXanJRSmRkQzMraGZsemN5MHVUSDRrYmIraHY2NlZOCjNKc08yb2FFWHBLeGtQdi9IWlpjQWNMMmMrTWdTZTVXaTQvbENmcHc2eWU5Z3pRZ1F4REQ1VUQwNE40OThYR3UKSW1DdlhtRUxGbG5RYlp6U2ppSUwvbzN0WEZPTWs4RXVJampDT21VMTA0YkRvejVtWS91MmpGTFMrbEp4N3hQRAoyOHJuSmRlenJhaHMxRWpqM1VhUDNnSDRwc2Q4b0QwSUJaSDJoWGM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: >-
    LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeTV4K3FRdjU1bTlodUNPOWdzWnVVdHZBUTVxNmNvZUxoYXk5UUhRaHN2VTdUSjc1ClBDQ2dFZ1FDcVVyU2ZsUWsvK1NmYTZxNmtHcWtUWmc5YlNXL2JLNVovSEpoaWdjdFIzaks1a3k0RU5LeitLaGIKQnk4eXh1R3RwQ2RidWUrQ09mbUw5NTA5QjMzYXhENU9YbjRBYTJ5bi9zd3lGOE9jTGR3aE11UkpDL3Y3TStwagpKYTNpMk14TmVSbnh4aHEzem05cHR5TnRqeTgwMEhZeDJsNXBWMmx4cmN1bFp4SjBFbUViOGFGdDR2S2Y1MXZmCkhMajU1S2tZcDV3cEFiZnRkMHVXNDFKclRYdllnSTJyMEc1YkF1Qmc3US9JUDJYbzhvSldFZnFzdnk4b1BFTEMKSHhxbzZSdmZnMmN4NG5YNUhSWWU5aWZ4dUNmeFJ6WDlMRXNzL3dJREFRQUJBb0lCQUdQT2NYUHg3K3laK24rbAozVmFHYUR2cmhrSmRUVG1vNGFhRDl6enA4RDdsNE14OVBOVFJkVVYvZThKNmI5WUc3eUFVZEdUMWlvQVNGam9HCi8wMUtiSndjbHZXZEo5emVDYjc0SWhWajAvSkRKbjhrSDRMVkN3SGNUQjZrUUYxVFh6V0Y4cXROQTBaeDFkUE8KYXVIOHg3M2d4RFNzNlgwbW9KOEdRYXZOcFZUZXJlbFdDaVJUTHRZSGVpSnlXTW9LRW5UWkNIVXZhd3hJWS8rcQpyaEsyNVBBMGRYeUp2U05IK3pFTDl0STcySVRoRjYzQlNiSmYwZDNvMnYxYUdLSGVid2wrUlVXeUd0VlhhbjN4CjJQd0lLcE82UDVER1dESFNrV1JJSG93UTRXV2tGb1NMcnV0Q1JsV3JNSlpTbkNDNXlNakV6SWlxbmFvMTlDYjgKdHI0WEo3a0NnWUVBKys5a1VWMXBXL0paZGJEc3lucmt3MjA5TzNMNU1FRTJ3T1dFY29MV3BkL0gvK254NFNzVQozaVFmNFRCck11VEJlekNGY2p2Lzg2Z1hNMElBOW15QlNQQWRUeE1EWHdtWi94VEtxeTg5alFNazFoRVRZZkhXCjNSZUdzQ0dTS2JZeC80alhJZWl0cndHNGJkOUFjUzV2ODNLemxQbmNNY2VtTG9obWZURWlHUjBDZ1lFQXp1V0EKMW92NC9SM2dxUjNvM2NrdEFuUU43NVRWdWt4NENEM3RQMEZPTHVrcS8xODF3UG1UdVRGVjVOTW5CUlBtK3d2VApiT2VJTW5sVnN6VVJNVnNlcmxpbDZUMUp2cENyRktCMUNSd0hrNnoyR0drREE1ZGFPQTFOWnZlMFR0M2hwQ1pLClE3SElRMG9taFJUSUpwTVl5dkJFYkJjd2pLTWo0R1hqRU04VjM4c0NnWUVBODg0QnFQUGJDQTRLSU9qczNpMzcKd0Z1d3pCMUJwVDhXKzZtaGVTZkJEWmo0ZFdJeW41TVBpTUl3ejc0Sm42RGMxSmhxSzlpQW80MWhsa3NqbjFYMQo3MTNmSHl6cE1FbWNhOHYxTGFCejBramVsd0xEWFIrcXJSOGRTc25TSnVlWWp4QWdFVUtaQWltS0QxbmpoU1JKClZyRUR0UUh2NDRTdi80d2trcmEvcHNrQ2dZRUFsVHFJTVRlSWdka1pBQ0lvb2ovR2pTeDBHTWc3V0VKcm1WWkIKVnd5ZGZjeUVUT201ZGRVT0xkZGQ0c3hDS3JGdU9za08yRkF2dG1nNTNpWjZuaVRnL2xQR1ozTGpTK1pBMzRIVQpxSnRsQTZrUFlBL3VNcHJxWWQrR1lxeHJpeThTM3prVys3aXhmNGR1UFRMK0lvU2FyMVdacEhVZGVYTDZINUtkCnNyUUxUUDBDZ1lCSWhFS2tHL2JYSURSOVlUQVhGWmxzNldCYVlQNnpWb0orVzVKZE1QTHpOM2M2TnFVbjBpMnMKNUR4bCsvcm9CSUJwUTd5ZDJBTis3ZGlIalBITUxPTG55WHoxTnQxemZIVzNLNGVIWlVWMHFBY0xFdzhZVStDSAppZy9aYmVkbmxvOVEwZUExSVBzeExJb3FRUURBc2duclBnd1E0dkZOYnRlNnFnN0xiL1JLUkE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
type: kubernetes.io/tls

---
# Source: quay-enterprise/templates/12_trust-ca.yaml
kind: Secret
apiVersion: v1
metadata:
  name: trust-ca
  namespace: quay-enterprise
data:
  rootCA.pem: >-
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURlVENDQW1HZ0F3SUJBZ0lKQU5JNjVvWHpYRk5mTUEwR0NTcUdTSWIzRFFFQkN3VUFNRk14Q3pBSkJnTlYKQkFZVEFsaFlNUlV3RXdZRFZRUUhEQXhFWldaaGRXeDBJRU5wZEhreEREQUtCZ05WQkFvTUEwMVBSREVSTUE4RwpBMVVFQ3d3SVEyeHZkV1JzWlhReEREQUtCZ05WQkFNTUExSnVSREFlRncweU1EQTFNVEV4TVRReU1UbGFGdzB6Ck1EQTFNRGt4TVRReU1UbGFNRk14Q3pBSkJnTlZCQVlUQWxoWU1SVXdFd1lEVlFRSERBeEVaV1poZFd4MElFTnAKZEhreEREQUtCZ05WQkFvTUEwMVBSREVSTUE4R0ExVUVDd3dJUTJ4dmRXUnNaWFF4RERBS0JnTlZCQU1NQTFKdQpSRENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFKbkV5ckZwcVNNcmJRckdmdlp1CkYwM1JSNXVwMVN2QTZOb20ySC9CbFlhK05KTlJuem0zdmZCaVNGb3dmRFRVOEsxcy9mdU03ajkzNCtBUkUvSjAKMDhRWEliS3NjanBjRE14OFBGdkpNSnlCZkRUS0ZuVERxMDdHV01QRWpmWVFDaWdKUkwrZFp2eWpDNHZWTWpzdgpCMDgrRGJobDhNSDNRWUxoeXhHSFBmUllHZ2lDNERzd015ckxtZU4vZUt2a0k3RXVEUC92LzNvSHY3T2FPLzlzCkFHdkNuS1ZEUzh1aE41TGdBeFprT3M5MDdsYXMyUWtHS202VDB1UTBoUU9jMWF2ZXZOTXh5YmswVGRBM0NEbHcKNzZjZ2lHTW1acmVNbHBHMy9JbTQ4MDBSK1Y5RGpHbDBHdElaeVpZL1g3N0VkOWpHdjZZZThjcC84b2dXNlhEQwowYk1DQXdFQUFhTlFNRTR3SFFZRFZSME9CQllFRklFWVprYy9ZYlNaQVNudUc4MUZIaTVDT3pzcE1COEdBMVVkCkl3UVlNQmFBRklFWVprYy9ZYlNaQVNudUc4MUZIaTVDT3pzcE1Bd0dBMVVkRXdRRk1BTUJBZjh3RFFZSktvWkkKaHZjTkFRRUxCUUFEZ2dFQkFDYWNzZ2FNSlAvcDl5OVgzeC9EY01jOWVjdEpqQTN1RHcxME4xV2VGTmVqK1RDawp3bExYc05nRHVXdEF1dWI1ZXRGckNKOXJZUTRMaWtBU0RLVElnMThuWEdLVlNWcVk0TFNieU9WWGxOcDliVng0Cm1xK2tQRGhGMTFNdCtZNndacEZOUldlRFVBQkxiOTZKMDJRSlBPQjU3a0RrOTNXNDlmMWpuUzFzd2MrZFBOUlMKTUhMWWlNcWtCUEd6Zk51Y2VYOTFXSnl6dUo4cmFmclpDaWxKaXpzVGQ0VUlaVHBNbndmWnRKMTZYNTFHZG9QUApvLzM4dVZjeGZxL2xvL2pWZjNWbmpoOWpnemU5VFZtRHdJYzlZbnN0Mnp3YWM3eC95cUdJaU1KWTcvOVN0djdpCjJteVpyaUR3Y1JaRWF2MXpyY0MwSXQ5cHVtN2FnMCtpM1UzRFZYVT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
type: Opaque

---
# Source: quay-enterprise/templates/13_redhatcop_v1alpha1_quayecosystem_cr.yaml
apiVersion: redhatcop.redhat.io/v1alpha1
kind: QuayEcosystem
metadata:
  name: quayecosystem
  namespace: quay-enterprise
spec:
  quay:
    externalAccess:
      tls:
        secretName: custom-quay-ssl
        termination: passthrough
    keepConfigDeployment: false
    superuserCredentialsSecretName: super-user-quay
    configSecretName: quay-config-creds
    imagePullSecretName: redhat-pull-secret
    persistentVolumeSize: "{{ .Values.CR.quay.persistentVolumeSize }}Gi"
    database:
      credentialsSecretName: db-creds
    enableRepoMirroring: true
    repoMirrorTLSVerify: true
    configFiles:
      - secretName: trust-ca
        type: extraCaCert
    livenessProbe:
      initialDelaySeconds: 420
      httpGet:
        path: /health/instance
        port: 8443
        scheme: HTTPS
    readinessProbe:
      initialDelaySeconds: 420
      httpGet:
        path: /health/instance
        port: 8443
        scheme: HTTPS
  redis:
    credentialsSecretName: redis-creds
    imagePullSecretName: redhat-pull-secret
  clair:
    enabled: false
    imagePullSecretName: redhat-pull-secret
    updateInterval: "{{ .Values.CR.clair.updateInterval }}"

#add under db:       volumeSize: "{{ .Values.CR.db.volumeSize }}Gi"
